version: '3.7'
services:
    mongodb_container:
      image: mongo:latest
      environment:
        MONGO_INITDB_ROOT_USERNAME: root
        MONGO_INITDB_ROOT_PASSWORD: admin
      ports:
        - 27017:27017
      volumes:
        - mongodb_data_container:/data/db
    nestjs_api_test:
      image: domco545/golden-hammer-backend
      environment:
        MONGO_CONNECTION_STRING: mongodb://root:admin@localhost/golden-hammer
        PORT: 3000
      command: npm run start:prod
      ports:
        - 4003:3000
        
volumes:
  mongodb_data_container: